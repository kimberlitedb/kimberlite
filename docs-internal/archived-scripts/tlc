#!/bin/bash
# TLC wrapper script for TLA+ Toolbox
# Automatically finds and runs tla2tools.jar

set -e

# Find tla2tools.jar
TLA_JAR="/Applications/TLA+ Toolbox.app/Contents/Eclipse/tla2tools.jar"

if [ ! -f "$TLA_JAR" ]; then
    echo "Error: TLA+ Toolbox not found at expected location"
    echo "Looking for tla2tools.jar..."
    TLA_JAR=$(find /Applications -name "tla2tools.jar" 2>/dev/null | head -1)
    if [ -z "$TLA_JAR" ]; then
        echo "Error: Could not find tla2tools.jar"
        echo "Please install TLA+ Toolbox: brew install --cask tla-plus-toolbox"
        exit 1
    fi
fi

# Run TLC with all arguments passed through
# Note: -deadlock flag allows deadlocks (we focus on safety, not liveness)
exec java -cp "$TLA_JAR" tlc2.TLC -deadlock "$@"
