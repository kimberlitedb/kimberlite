[package]
name = "kmb-server"
description = "Kimberlite server daemon"
version.workspace = true
edition.workspace = true
license.workspace = true
repository.workspace = true

[lints]
workspace = true

[dependencies]
# Internal crates
kimberlite.workspace = true
kmb-types.workspace = true
kmb-wire.workspace = true
kmb-query.workspace = true
kmb-vsr.workspace = true
kmb-kernel.workspace = true

# Networking
mio = { version = "1", features = ["net", "os-poll"] }

# TLS
rustls.workspace = true
rustls-pemfile.workspace = true

# Authentication
jsonwebtoken.workspace = true

# Metrics
prometheus.workspace = true

# Core
base64.workspace = true
bytes.workspace = true
thiserror.workspace = true
tracing.workspace = true
serde.workspace = true
serde_json.workspace = true

[dev-dependencies]
tempfile.workspace = true
kmb-client.workspace = true

# Platform-specific signal handling
[target.'cfg(unix)'.dependencies]
signal-hook.workspace = true
signal-hook-mio.workspace = true

[target.'cfg(windows)'.dependencies]
ctrlc = "3.4"
