<!-- Scroll Progress - Reading Position Ruler -->
<div class="scroll-progress" aria-hidden="true">
  <div class="scroll-progress__bar"></div>
</div>

<header class="site-header" data-signals='{ "mobileMenuOpen": false, "currentTheme": "light" }' data-init="$currentTheme = document.documentElement.getAttribute('data-theme') || 'light'">
  <!-- Primary Navigation -->
  <nav class="primary-nav" role="navigation" aria-label="Primary navigation">
    <div class="wrapper repel" data-nowrap>
      <!-- Logo (left) -->
      <div class="brand">
        <a href="/" class="site-logo" aria-label="Kimberlite home">
          <svg class="logo-funnel" width="36" height="28" viewBox="0 0 40 32" aria-hidden="true">
            <!-- Kimberlite pipe / funnel shape -->
            <path class="logo-funnel__shape" d="M0 0 L20 32 L40 0 Z" fill="currentColor"/>
            <!-- Geological strata layers (top to bottom) -->
            <rect class="logo-funnel__layer" data-layer="1" x="4" y="6" width="32" height="2.5"/>
            <rect class="logo-funnel__layer" data-layer="2" x="9" y="14" width="22" height="2.5"/>
            <rect class="logo-funnel__layer" data-layer="3" x="14" y="22" width="12" height="2.5"/>
          </svg>
          <span class="site-name">Kimberlite</span>
        </a>
      </div>

      <!-- Spacer for layout (center) -->
      <div></div>

      <!-- Actions (right) -->
      <div class="nav-actions cluster">
        <!-- Theme Toggle -->
        <button type="button" class="theme-toggle"
          data-attr:aria-label="$currentTheme === 'dark' ? 'Switch to light mode' : 'Switch to dark mode'"
          data-on:click="
            const next = $currentTheme === 'light' ? 'dark' : 'light';
            document.documentElement.setAttribute('data-theme', next);
            document.documentElement.style.colorScheme = next;
            localStorage.setItem('theme', next);
            $currentTheme = next;
          ">
          <!-- Sun icon (shown in dark mode - click to switch to light) -->
          <svg class="theme-toggle__sun" width="20" height="20" viewBox="0 0 128 128" fill="currentColor" stroke="currentColor" stroke-width="8" stroke-linecap="round" aria-hidden="true">
            <circle cx="64" cy="64" r="26"/>
            <path d="m39 89-7 7m7-57-7-7m64 64-7-7m7-57-7 7M30 64H17m94 0H98M64 98v13m0-94v13"/>
          </svg>
          <!-- Moon icon (shown in light mode - click to switch to dark) -->
          <svg class="theme-toggle__moon" width="20" height="20" viewBox="0 0 128 128" fill="currentColor" stroke="none" aria-hidden="true">
            <path d="M108 94A50 49 35 1153 16a54 50 35 0055 78Z"/>
          </svg>
        </button>
      </div>
    </div>
  </nav>

  <!-- Secondary Navigation (Documentation-specific) -->
  <nav class="secondary-nav" role="navigation" aria-label="Documentation navigation">
    <div class="wrapper repel" data-nowrap>
      <!-- Navigation Links -->
      <ul class="nav-list" role="list">
        <li><a href="/docs">Docs</a></li>
        <li><a href="/compare/postgresql">Compare</a></li>
        <li><a href="/blog">Blog</a></li>
        <li><a href="/download">Download</a></li>
      </ul>

      <!-- Docs Meta (License + GitHub) -->
      <div class="docs-meta cluster">
        <div class="license-badge">
          License <a href="https://www.apache.org/licenses/LICENSE-2.0" class="license-link">Apache 2.0</a>
        </div>
        <a href="https://github.com/kimberlitedb/kimberlite" class="icon-link" aria-label="View on GitHub">
          <svg width="20" height="20" viewBox="0 0 128 128" fill="currentColor" stroke="none" aria-hidden="true">
            <path d="M75 114V96q0-5-5-7 29-7 19-38 2-10 0-14-5 0-14 5-12-5-23 0-10-5-14-5-2 5 0 14-10 31 19 38-5 2-5 7-10 2-14-5-3-5-10-5-5 1 3 6c5 3 3 13 22 12v10m0 0a50 50 90 1 1 22 0"/>
          </svg>
        </a>
      </div>
    </div>
  </nav>

  <!-- Mobile Menu Overlay -->
  <div class="mobile-menu" data-show="$mobileMenuOpen" data-on:click="$mobileMenuOpen = false">
    <div class="mobile-menu__content" data-on:click__stop="void(0)">
      <div class="mobile-menu__header">
        <span class="site-name">Kimberlite</span>
        <button
          class="mobile-menu__close"
          data-on:click="$mobileMenuOpen = false"
          aria-label="Close menu"
          type="button"
        >
          <span aria-hidden="true">Ã—</span>
        </button>
      </div>
      <nav class="mobile-menu__nav">
        <ul class="mobile-nav-list" role="list">
          <li><a href="/docs" data-on:click="$mobileMenuOpen = false">Docs</a></li>
          <li><a href="/compare/postgresql" data-on:click="$mobileMenuOpen = false">Compare</a></li>
          <li><a href="/blog" data-on:click="$mobileMenuOpen = false">Blog</a></li>
          <li><a href="/download" data-on:click="$mobileMenuOpen = false">Download</a></li>
        </ul>
      </nav>
      <div class="mobile-menu__footer">
        <a href="https://www.apache.org/licenses/LICENSE-2.0" class="license-link">Apache 2.0 License</a>
      </div>
    </div>
  </div>
</header>
